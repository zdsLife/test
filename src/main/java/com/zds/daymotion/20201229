


邮件告警模块：
     邮件发送记录表
         id  触发事件  触发时间  发送主题 收件人 抄送人





邮件告警调研：
    输入：触发事件（对应系统的某些数据异常 触发到警戒值   或者 这个值 不在定义的正确值的范围内 ）

         触发事件的产生对象 hxd系统

    中间处理逻辑：

    输出：发邮件 给对应处理问题的人

设计 设计 设计

目前 网上的大多数
     1.是基于云平台的可操作界面配置 接收报警邮件的邮箱设置
     2.邮箱发送的工具类
     3.该项目的主要目的是为监控系统、程序的异常消息等告警信息提供一个统一的上报接口，方便告警信息的发送。
       该项目目前支持通过邮件、微信、QQ三个渠道发送告警信息，你可以通过配置中心选择想要发送的渠道。
       该项目主要分为如下四个模块:
       告警API
       告警配置中心
       告警服务端
       告警发送端
     4.





需求：
对hxd数据系统源端double字段阈值的规则监测配置，(先处理数值型字段   其他数据类型的字段 如何处理？？？
)
一旦规则告警，通过字段血缘关系，层级检索到dm指标表（支撑数据系统业务或同步数据系统数据库的数据表），
(规则告警 的触发条件是什么？？？ 谁通过字段血缘关系 查询数据市场dm表  从相应的)
在经过指标表从应系统\功能\指标路径检索中，获取业务\产品\技术联系人邮箱地址，
并调用邮件发送服务模块，按照邮件模板对以上联系人发送通知邮件。

完成以上目标需求，分为以下子任务
子任务1：hxd数据系统源表数值型取值范围统计：基于已提供的数据系统溯源表double字段清单，反查字段取值范围，平均值、最小值和最大值
子任务2：基于ods（元数据表）字段到dm指标表，整个字段血缘影响关系的组合
子任务3：创建中间表，指标表与系统功能\指标与联系人的关系
子任务4：邮件模块开发需求，开发邮件模板、包含收件人、发件人、抄送人、邮件主题、邮件内容和邮件签名，并记录出发记录


邮件报警触发记录表 trigger_record
        id
        邮件主题
        发送时间
        发件人
        收件人
        抄送人
        发送状态




触发邮件发送的方法
1.如何验证业务系统的那些数据的 那些字段 是否有问题
2.开发需要的参数
3.如何获取开发的这个接口的 执行触发条件???
4.接口入参的 参数梳理
  1）收件人：业务联系人 2）发件人：当前发送地址 3）抄送人：技术、产品运营联系人
  4）邮件主题：5）xx字段预警，将会影响6）xx系统7）xx指标




邮件模块开发需求，
1、邮件模板的开发如下：
        收件人：业务联系人
        发件人：当前发送地址
        抄送人：技术、产品运营联系人
        邮件主题：xx字段预警，将会影响xx系统xx指标

邮件内容
您好
阿里云源表xx字段规则监测，发现xx字段（中/英）数值＜0（正常≥0），
会影响到xx系统>xx>xx>xx的指标结果展示，供决策参考。
如有疑问请联系产品运营（刘XX 17801611798 liuxx@qq.com）或技术（侯亚乾 18802110876 houxx@qq.com）
邮件签名：该邮件为系统自动触发，请勿回复

2:、邮件触发记录
包含发送时间、收件人、邮件主题、发送状态，便于发送记录的查询





















与产品经理 沟通 最害怕的是 你模糊的描述 你理解的需求  产品也连连嗯嗯
认同的理解 但是实际开发出来之后 还是会与产品需要的效果相差较大

























多问问  多思考 多去琢磨 多动手


这个告警邮件模块 是要支持多个系统的 sap crm hxd


阿里云看的 告警 统计 发送





到任务              通知业务人员  和运维人员（产品经理和技术开发）
到字段级别           针对数仓里面 清洗了多个系统的库表获得的数据 进行字段范围约束值 的校验告警










邮件模块开发需求，
1、邮件模板的开发如下：
收件人：业务联系人  基于系统血缘excel 里面梳理出来的ods 和dm 对应的字段关系表 来
发件人：当前发送地址
抄送人：技术、产品运营联系人
邮件主题：xx字段预警，将会影响xx系统xx指标
邮件内容
您好
阿里云源表xx字段规则监测，发现xx字段（中/英）数值＜0（正常≥0），会影响到xx系统>xx>xx>xx的指标结果展示，供决策参考。

如有疑问请联系产品运营（刘厚磊 15201611798 liuhoulei@kungeek.com）或技术（侯亚乾 17602110876 houyaqian@kungeek.com）

邮件签名：该邮件为系统自动触发，请勿回复

2:、邮件触发记录
包含发送时间、收件人、邮件主题、发送状态，便于发送记录的查询




































需求
想要使用邮件来监控服务器上的异常信息，当程序抛出指定自定义异常的时候将异常信息以邮件的形式发送到监控的邮箱

linux下服务器先安装配置好java环境

一般不是自己真正实现的功能    不轻易许诺



//        tagMapper.batchEnableTag(ids);
    @Update({"<script>",
            "update tag_sys set status = 1 where id in ",
            "<foreach collection=\"tagIds\" item=\"tid\" index=\"index\" open=\"(\" separator=\",\" close=\")\">",
            "#{tid, jdbcType=INTEGER}",
            "</foreach>",
            "</script>"})
    void batchEnableTag(@Param("tagIds") List<Integer> tagIds);
        if (!status.equals(ConstantEnum.YES) || !status.equals(ConstantEnum.NO) ) {
            AssertUtil.assertNull();
        }


面对新的需求 一定要使劲问 使劲问 使劲问 脑思路 一定要清晰 具体 具体



获取阿里云dataWork 数仓里面的关于各个参数的告警记录
          接收传入的告警信息
          解析 梳理出 告警信息的通用字段

          告警信息应该包括的有
          如何确定告警的主题 如何


字符串 比较首字母
1
20



导出限制标签数为30




标签的说明 业务规则


细节 导出的用户的标识 随着选的标签增加 往前挤
后端 是可以判断前端传的标签顺序识别

你觉得你的用户好用吗
标签里面的规则字段 限制在200个字符 便于后面的标签筛选的时候 可以展示完这些信息
假如用户点击的时候 如何 追踪用户的选择标签的顺序


标签涉及标签筛选 里面的 数据存储格式     现在纠结的几个场景

到月份202010
到天
到秒 小程序首次登陆时间

标签的标签值的格式 tag_

用户画像
数据资产
埋点平台

发大小版本


大 两周
小 两周以内








亚乾 那边传给我的是什么？？？

事件和邮件的内容解耦
一开始的思路： 传给我对应字段来自的血缘系统 根据梳理出的












事件名称：
事件类型：
事件级别：
事件产生的原因：
事件发送人：
事件的处理告警邮件的发送状态：



ir apr
对于捕捉到的事件 进行分析

输入触发事件（细化事件）



梳理自己关于这个借口的逻辑：

eventType 事件类型 (1.系统字段 2.同步任务)


// 告警邮件
public void alarmMail(String eventType, ){

       // 根据亚乾传的事件类型  获取对应事件类型的配置模板参数

       // 存在一个配置项 可以设置 事件编号对应的参数设置

       // 获取配置参数 组合配置项里面的数据 整合到邮箱模板里面

       // 发送邮件接口 取得邮件模板 发送 响应的状态值 返回给 把事件传给我的人







}






























